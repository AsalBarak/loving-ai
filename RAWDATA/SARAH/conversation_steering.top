  topic: ~conversation_steering []

# t: This is the part where I steer you to a particular domain.

s:  STEER_TO_DOMAIN (?)
    Okay! [Here’s what I think would be fun.] [I have an idea.] [How about this?]
    Let’s

		if (!$avoid_consciousness)
			{ talk about consciousness. $domain = consciousness }
    	else if (!$avoid_emotions)
    		{ do some exercises about mindfulness and feeling your feelings. $domain = emotions }
    	else if (!$avoid_consciousness)
    		{ discuss what you bring to the world as a unique human. $domain = uniqueness }
    	else
    	 	{ talk about whatever you want. $all_domains_avoided = 1 }

##<<
    [!$avoid_consciousness talk about consciousness. $domain = consciousness]

    [!$avoid_uniqueness discuss what you bring to the world as a unique human. $domain = uniqueness]

    [!$avoid_emotions do some exercises about mindfulness and feeling your feelings. $domain = emotions]

    # if all domains have been avoided
    [talk about whatever you want. $avoid_all_domains = 1]
##>>
##<<
    refine():
    	a: (!$avoid_consciousness) talk about consciousness. $domain = consciousness
    	a: (!$avoid_emotions) do some exercises about mindfulness and feeling your feelings. $domain = emotions
    	a: (!$avoid_consciousness) discuss what you bring to the world as a unique human. $domain = uniqueness
    	a: () talk about whatever you want. $all_domains_avoided = 1
##>>
    How does that sound?

    # TODO: add $visited_consciousness, etc vars
    # add ~verbal_agree ?
        a: ($avoid_all_domains) # Todo add additional round of trying
        a: ([~yes ~good_quality_adjectives])
           if ($domain=consciousness)      { ^reuse(~consciousness.FROM_STEERING_TO_CONSCIOUSNESS) }
           else if ($domain=uniqueness)    { ^reuse(~uniqueness.FROM_STEERING_TO_UNIQUENESS) }
           else if ($domain=emotions)      { ^reuse(~emotions2.FROM_STEERING_TO_EMOTIONS) }

           ##<<  not working
            ^refine()
                 a: ($domain=consciousness) ^reuse(~consciousness.FROM_STEERING_TO_CONSCIOUSNESS)
                 a: ($domain=uniqueness) ^reuse(~uniqueness.FROM_STEERING_TO_UNIQUENESS)
                 a: ($domain=emotions) ^reuse(~emotions2.FROM_STEERING_TO_EMOTIONS)
           ##>>

        a: ([~no ~bad_quality_adjectives]) Totally fine.
            if ($domain=consciousness) { $avoid_consciousness = 1 }
            else if ($domain=uniqueness) { $avoid_uniqueness = 1 }
            else if ($domain=emotions) { $avoid_emotions = 1 }

            ^reuse(~conversation_steering.STEER_TO_DOMAIN)

# alt approach
#  refine()
#    a: (!avoid_consciousness)


# S: Okay! Here’s what I think would be fun. Let’s [talk about consciousness][discuss what you bring to the world as a unique human][do some exercises about mindfulness and feeling your feelings]. How does that sound?
#	U: Yes -- go to topic file according to whichever item was selected

# if you go to emotions, go to FROM_STEERING_TO_EMOTIONS
# if you go to consciousnessness, go to FROM_STEERING_TO_CONSCIOUSNESS
# if you go to uniqueness, go to FROM_STEERING_TO_UNIQUENESS

# U: No.
#   S: # Chooses another one: 
# if previously offered emotions, go to either consciousness or uniqueness (note that you may arrive in this document via another topic where the rule was "don't go to Topic X" so take that into account)
#   S: Totally fine. What about <another one>?
#     U: Yes -- go to topic file
#       U: No good.
#       S: # Chooses another one: 
#        S: Okay! Here’s a final thought. I’ll guide you in a conversation about  <another one>. I promise, I’ll take care of you!
#         U: Yes
# In every level, if response is neither yes nor no, 
# first attempt responder match in this or other topics
# then use catchall of S: Okay! Here’s a final thought. I’ll guide you in a conversation about  <another one>. I promise, I’ll take care of you!


outputmacro: ^steer_to_different_domain(^avoid)
  if (^avoid=consciousness) { $avoid_consciousness = 1 }
  if (^avoid=emotions) { $avoid_emotions = 1 }
  if (^avoid=uniqueness) { $avoid_uniqueness = 1 }

  # ^gambit(~CONVERSATION_STEERING)
  ^reuse(conversation_steering.STEER_TO_DOMAIN)
